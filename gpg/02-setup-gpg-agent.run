#!/usr/bin/env bash

if [ ! -d "${HOME}/.gnupg" ]; then
  mkdir "${HOME}/.gnupg"
  chmod 700 "${HOME}/.gnupg"
fi


if [ ! -f "${HOME}/.gnupg" ]; then

cat <<EOF > "${HOME}/.gnupg/gpg-agent.conf"
enable-ssh-support
default-cache-ttl 60
max-cache-ttl 120
EOF

fi

# Start gpgp agent
export GPG_TTY="$(tty)"
export SSH_AUTH_SOCK="/run/user/$UID/gnupg/S.gpg-agent.ssh"
gpg-connect-agent updatestartuptty /bye > /dev/null

